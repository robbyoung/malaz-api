extends ../page.pug
include ../components/sceneNav.pug

block content
    div#container
        div#text-container
            p(
                hx-get="/selection"
                hx-vars=`sceneId:'${sceneId}',range:(parseInt(window.getSelection().baseNode.parentElement.attributes["select-from"].value)+window.getSelection().baseOffset)+'-'+(parseInt(window.getSelection().extentNode.parentElement.attributes["select-from"].value)+window.getSelection().extentOffset)`
                hx-target="#selection"
                hx-swap="outerHTML"
                hx-trigger="mouseup"
                class="text-wrap color-highlight padding-x padding-y"
            )
                each chunk in chunks 
                    span(select-from=chunk.selectFrom class=chunk.class) #{chunk.text}
        div#selection-container
            div
                h1(class="heading") #{title}
                div(class="ochre shadowed")
                    p#selection No selection
                +sceneNav(previousSceneId, nextSceneId)
